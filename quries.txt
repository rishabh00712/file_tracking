CREATE TABLE dean_id (
    dean_no INT PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

CREATE TABLE departments (
    d_no INT REFERENCES dean_id(dean_no) ON DELETE CASCADE,
    dep_code VARCHAR(4) NOT NULL PRIMARY KEY ,
    dept_name VARCHAR(255) NOT NULL
);

ALTER TABLE departments ADD CONSTRAINT unique_dep_code UNIQUE (dep_code);

CREATE TABLE members (
    dep_code VARCHAR(4) NOT NULL,
    member_name VARCHAR(255) NOT NULL,
	member_email VARCHAR(255) NOT NULL,
    PRIMARY KEY (dep_code, member_email),
    FOREIGN KEY (dep_code) REFERENCES departments(dep_code) ON DELETE CASCADE
);

CREATE TABLE dep_files (
	file_id VARCHAR(15),
    dep_code VARCHAR(4) NOT NULL,
    PRIMARY KEY (file_id,dep_code, ), 
    FOREIGN KEY (dep_code) REFERENCES departments(dep_code) ON DELETE CASCADE,
    FOREIGN KEY (file_id) REFERENCES file_arrangement(file_id) ON DELETE CASCADE
);


CREATE TABLE file_location (
	number INT ,
    file_id VARCHAR(15),
    dep_code VARCHAR(4),
    date VARCHAR(255),
    FOREIGN KEY (file_id) REFERENCES file_arrangement(file_id) ON DELETE CASCADE,
    FOREIGN KEY (dep_code) REFERENCES departments(dep_code) ON DELETE CASCADE,
	PRIMARY KEY (file_id,dep_code)
);

CREATE TABLE file_arrangement (
    file_id VARCHAR(15) PRIMARY KEY,
    dep_array VARCHAR[] ,
description VARCHAR(25)
);
CREATE TABLE file_req(
    file_id VARCHAR(15) PRIMARY KEY,
    date varchar(255)
);
.....................................................
UPDATE file_location
SET date='30/12/24'
WHERE file_id='f1001' and dep_code='EP';

SELECT * FROM public.file_location where file_id='f1001'
ORDER BY number 